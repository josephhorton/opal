{% extends "layouts/main.html" %}

{% set pageName = "Create account" %}

{% block pageTitle %}
{{ pageName }} – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}

<a href="./account-details.html" class="govuk-back-link">Back</a>


{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">


      <span class="govuk-caption-l">{{ data['businessUnit'] or "Bedfordshire" }}</span>
      <h1 class="govuk-heading-l govuk-!-margin-bottom-8">{{ pageName }}</h1>

      <!-- <div class="govuk-inset-text">
        Defendant type is {{ data['defendantType'] or 'Individual only'}}.
      </div> -->

      <!-- CONDITIONS FOR STATUS TAGS -->
      <div>

        <!-- GENERAL NOT STARTED -->
        {% set notStarted = {
          tag: {
            text: "Not provided",
            classes: "govuk-tag--blue"
          }
        } %}

        <!-- STATUSES FOR COURT DETAILS -->

        {% if (data['cdCompleted'] == "true") %}

            {% set cdStatusTag = {
              text: "Completed"
            } %}
            
          {% else %}

          {% if (data['cd-status'] == "started") %}

            {% set cdStatusTag = {
              tag: {
                text: "In progress",
                classes: "govuk-tag--light-blue"
              }
            } %}

          {% else %}

            {% set cdStatusTag = {
              tag: {
                text: "Not provided",
                classes: "govuk-tag--blue"
              }
            } %}

          {% endif %}
        
        {% endif %}

        <!-- PERSONAL DETAILS -->

        {% if (data['pdCompleted'] == "true") %}

            {% set pdStatusTag = {
              text: "Completed"
            } %}
            
          {% else %}

          {% if (data['pd-status'] == "started") %}

            {% set pdStatusTag = {
              tag: {
                text: "In progress",
                classes: "govuk-tag--light-blue"
              }
            } %}

          {% else %}

            {% set pdStatusTag = {
              tag: {
                text: "Not provided",
                classes: "govuk-tag--blue"
              }
            } %}

          {% endif %}
        
        {% endif %}

        <!-- DOCUMENT AND HEARING LANGUAGE -->

        {% if (data['dhCompleted'] == "true") %}

            {% set dhStatusTag = {
              text: "Completed"
            } %}
            
          {% else %}

          {% if (data['dh-status'] == "started") %}

            {% set dhStatusTag = {
              tag: {
                text: "In progress",
                classes: "govuk-tag--light-blue"
              }
            } %}

          {% else %}

            {% set dhStatusTag = {
              tag: {
                text: "Not provided",
                classes: "govuk-tag--blue"
              }
            } %}

          {% endif %}
        
        {% endif %}

        <!-- OFFENCE DETAILS -->

        {% if (data['ofdCompleted'] == "true") %}

            {% set ofdStatusTag = {
              text: "Completed"
            } %}
            
          {% else %}

          {% if (data['ofd-status'] == "started") %}

            {% set ofdStatusTag = {
              tag: {
                text: "In progress",
                classes: "govuk-tag--light-blue"
              }
            } %}

          {% else %}

            {% set ofdStatusTag = {
              tag: {
                text: "Not provided",
                classes: "govuk-tag--blue"
              }
            } %}

          {% endif %}
        
        {% endif %}
      </div>

      <h2 class="govuk-heading-m ">Court details</h2>

      {{ govukTaskList({
        idPrefix: "first-section",
        items: [
          {
            title: {
              text: "Court details",
              classes: "govuk-link--no-visited-state"
            },
            href: './court-details/check-answers' if data['return'] == 'check-answers' else './court-details/sending-court',
            status: cdStatusTag
          }
        ]
      }) }}

      <h2 class="govuk-heading-m govuk-!-margin-top-7">Defendant details</h2>
      <p class="govuk-body">Defendant type is {{ data['defendantType'] or 'Individual only'}}.</p>

      <!-- TASK LIST -->
      {{ govukTaskList({
        idPrefix: "second-section",
        items: [
          {
            title: {
              text: "Personal details",
              classes: "govuk-link--no-visited-state"
            },
            href: './personal-details/check-answers' if data['personal-details-end'] == 'true' else './personal-details/personal-details',
            status: pdStatusTag
          } if data['defendantType'] == 'Individual only',
          {
            title: {
              text: "Company details",
              classes: "govuk-link--no-visited-state"
            },
            href: '#',
            status: notStarted
          } if data['defendantType'] == 'Company',
          {
            title: {
              text: "Contact preferences",
              classes: "govuk-link--no-visited-state"
            },
            href: "#",
            status: notStarted
          },
          {
            title: {
              text: "Language preference",
              classes: "govuk-link--no-visited-state"
            },
            href: './language-preference/check-answers' if data['language-preference-end'] == 'true' else './language-preference/language-preference',
            status: dhStatusTag
          } if data['businessUnit'] == 'North Wales',
          {
            title: {
              text: "Employer details",
              classes: "govuk-link--no-visited-state"
            },
            href: "#",
            status: notStarted
          },
          {
            title: {
              text: "Vehicle details",
              classes: "govuk-link--no-visited-state"
            },
            href: "#",
            status: notStarted
          }
        ] | removeEmpty
      }) }}

      <h2 class="govuk-heading-m govuk-!-margin-top-7">Offence and imposition details</h2>

      {{ govukTaskList({
        idPrefix: "third-section",
        items: [
          {
            title: {
              text: "Offence details",
              classes: "govuk-link--no-visited-state"
            },
            href: "./offence-details/add-offence.html",
            status: ofdStatusTag
          },
          {
            title: {
              text: "Payment terms",
              classes: "govuk-link--no-visited-state"
            },
            href: "#",
            status: {
              tag: {
                text: "Not provided",
                classes: "govuk-tag--blue"
              }
            }
          }
        ] 
      }) }}

      <!-- <h2 class="govuk-heading-m govuk-!-margin-top-7">Additional information</h2>

      {{ govukTaskList({
        idPrefix: "fourth-section",
        items: [
          {
            title: {
              text: "Additional information",
              classes: "govuk-link--no-visited-state"
            },
            href: './summary/check-answers' if data['additional-information-end'] == 'true' else './summary/summary',
            status: AItaskComplete
          }
        ]
      }) }} -->

      <h2 class="govuk-heading-m govuk-!-margin-top-7">Review and publish</h2>

      <p class="govuk-body">Check that all required fields have been entered before you publish.</p>

      <div class="">
        {{ govukButton({ text: "Review account", href: "#" }) }}
      </div>

      <p class="govuk-body govuk-!-margin-top-2"><a href="#" class="govuk-link app-destructive-link">Delete account</a></p>

    </div> 
  </div>
{% endblock %}
